{
  "analysis_date": "2026-01-30",
  "issue": "https://github.com/konard/tsp/issues/23",
  "description": "Moore curve coverage analysis showing the cross-shaped gap caused by incorrect order calculation",
  "old_formula": "order = Math.max(1, Math.round(Math.log2(mooreGridSize)) - 1)",
  "new_formula": "order = Math.max(1, Math.round(Math.log2(mooreGridSize)))",
  "coverage_before_fix": {
    "grid_2": {
      "order_used": 1,
      "unique_positions": 9,
      "total_vertices": 9,
      "coverage_percent": 100.0,
      "note": "Order 1 happens to be correct for grid size 2"
    },
    "grid_4": {
      "order_used": 1,
      "unique_positions": 16,
      "total_vertices": 25,
      "coverage_percent": 64.0,
      "missed_positions": [
        "(0,2)",
        "(1,2)",
        "(2,0)",
        "(2,1)",
        "(2,2)",
        "(2,3)",
        "(2,4)",
        "(3,2)",
        "(4,2)"
      ]
    },
    "grid_8": {
      "order_used": 2,
      "unique_positions": 64,
      "total_vertices": 81,
      "coverage_percent": 79.0,
      "pattern": "Cross-shaped gap: entire middle row (y=4) and middle column (x=4) are missed"
    },
    "grid_16": {
      "order_used": 3,
      "unique_positions": 256,
      "total_vertices": 289,
      "coverage_percent": 88.6,
      "pattern": "Cross-shaped gap at x=8 and y=8"
    }
  },
  "coverage_after_fix": {
    "grid_2": {
      "order_used": 1,
      "coverage_percent": 100.0
    },
    "grid_4": {
      "order_used": 2,
      "coverage_percent": 100.0
    },
    "grid_8": {
      "order_used": 3,
      "coverage_percent": 100.0
    },
    "grid_16": {
      "order_used": 4,
      "coverage_percent": 100.0
    },
    "grid_32": {
      "order_used": 5,
      "coverage_percent": 100.0
    }
  },
  "grid_size_selector_fix": {
    "before": {
      "type": "number input",
      "range": "5-50",
      "mapping": "gridSize 5 -> mooreGridSize 8, gridSize 10 -> mooreGridSize 16"
    },
    "after": {
      "type": "dropdown select",
      "valid_sizes": [2, 4, 8, 16, 32, 64],
      "mapping": "identity (gridSize = mooreGridSize)"
    }
  }
}
